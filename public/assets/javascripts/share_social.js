// Generated by CoffeeScript 1.9.3
(function() {
  var attribute, initialize;

  attribute = '#social_share .share';

  initialize = function(element, selector) {
    var source, target;
    source = $(element);
    target = $(selector);
    return $(source).click(function() {
      var social_network;
      social_network = $(element).attr("class").split(" ").filter(function(data) {
        if (data !== "share") {
          return data;
        }
      });
      social_network = social_network[0];
      return $.post("/xhr/social_shares", {
        social_share: {
          shareable_id: $(element).attr("data-shareable-id"),
          shareable_type: $(element).attr("data-shareable-type"),
          social_network: social_network
        }
      }).always(function(data) {
        var social_url;
        if (social_network !== 'mail') {
          social_url = {
            facebook: "https://www.facebook.com/sharer/sharer.php?u=",
            twitter: "https://twitter.com/intent/tweet?source=webclient&text="
          }[social_network];
          social_url += encodeURI(window.location);
          window.open(social_url, "_blank").focus();
        }
      });
    });
  };

  $("" + attribute).each(function(index, element) {
    var value;
    value = $($(element).attr(attribute));
    return initialize(element, value);
  });

}).call(this);
