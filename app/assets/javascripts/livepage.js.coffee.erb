#= require swfobject
#= require angular
#= require state-machine.min
#= require_self
#= require_tree ./angular

window.Livepage = angular.module 'Livepage', []

configFunc = ($logProvider) ->
  $logProvider.debugEnabled <%= !Settings.disable_js_debugging %>

configFunc.$inject = ['$logProvider']
window.Livepage.config configFunc

# Override Angular exception handler to receive a backtrace in Angular
# exceptions
exceptionFunc = ($log) ->
  (exception, cause) ->
    exception.message += " (caused by \"" + cause + "\")"
    throw exception

exceptionFunc.$inject = ['$log']
window.Livepage.factory "$exceptionHandler", exceptionFunc
