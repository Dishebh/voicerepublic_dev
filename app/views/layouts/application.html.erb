<!DOCTYPE html>
<html lang="<%= I18n.locale.to_s %>" xmlns:fb="http://ogp.me/ns/fb#">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
		<%= content_for?(:facebook_values) ? yield(:facebook_values) : '' %>
		<title><%= content_for?(:title) ? yield(:title) : t(".landing_title", :default => "KluuU - Discussions") %> </title>
		<%= csrf_meta_tags %>
		<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
		<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
		<![endif]-->
		<%= stylesheet_link_tag "application", :media => "all" %>
      <%= stylesheet_link_tag 'kblog/articles', :media => "all" %>
		<%= stylesheet_link_tag controller.controller_name, :media => "all" %>

		<link href="/images/favicon.ico" rel="shortcut icon">
		<link href="images/apple-touch-icon.png" rel="apple-touch-icon">
		<link href="images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">
		<link href="images/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114">
                <script type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.1/angular.js'></script>
                <%= airbrake_javascript_notifier %>
    <%= yield(:head) %>
	</head>
	<body class='<%= current_or_guest_user ? "" : "layout-logged-out" %>'>
<div ng-app="testApp" ng-controller="testController">
<script type='text/javascript'>//<![CDATA[

var mod = angular.module('testApp', []);

mod.factory('$exceptionHandler', function ($log) {
    return function (exception, cause) {
      exception.message += ' (caused by "' + cause + '")';
      throw exception;
    };
});

mod.controller('testController', function($scope) {
    1 / new_variable;
    throw { message: 'error message' };
});

//]]>

</script>

		<% if current_or_guest_user %>
			<%= render(:partial => "shared/actionbar") %>
			<%#= render(:partial => '/shared/check_flash') -%>
		<% else %>
			<%= render(:partial => "shared/navbar")%>
		<% end %>
		<%= render(:partial => "shared/notice_or_error") %>

		<div class="container">
			<%= yield %>
		</div>
		<%= render(:partial => "shared/footer") %>

		<!-- Javascripts
		================================================== -->
		<%= javascript_include_tag "application" %>
		<%= yield :javascript %>
		<!-- Placed at the end of the document so the pages load faster -->
		<%= render(:partial => 'shared/google_analytics') %>
	</body>
</html>
