.layout-talk(ng-controller='Livepage')
  .talk-upper-block{ :style => "background-image: url(http://lorempixel.com/1200/600/people/1)"}
    %section.talk-title-box.row.text-center
      .talk-host-name
        = @talk.user.name
      %h2.talk-title
        = @talk.title
      %h3.talk-teaser
        = @talk.teaser
      .talk-date-time MAY 6, 2014 | 17:00 -17.30
      #flashContent

  .talk-live-row
    .row
      .talk-talkers-box.large-10.large-offset-1.columns
        .debug
          %ul
            -#%li config: {{ config }}
            %li session: {{ session }}
            %li session.config: {{ session.config }}
            %li session.config.host: {{ session.config.host }}
            %li config.host: {{ config.host }}
            %li config.title: {{ config.title }}
            %li config.teaser: {{ config.teaser }}
            %li session.fsm.current: {{ session.fsm.current }}
            %li session.users: {{ session.users }}
        .host.avatar.avatar-host      
          %p.avatar-name.text-center
            {{ session.config.host }}
          %img.avatar-img(src="http://lorempixel.com/80/80/people/1/")
          
        .guest.avatar(ng-repeat="guest in session.guests()")
          %span(ng-click="session.demote(guest.name)")
            %p.avatar-name.text-center
              {{ guest.name }}
            %img.avatar-img(ng-src="{{guest.image}}")
    
    .talk-live-mic-states-row.row
      .large-12.text-center
        #onair(ng-show='session.onair') On Air
        %button.button(ng-show='session.fsm.is("Listening")' ng-click='session.fsm.RequestedMic()') Request Mic
        %button.button(ng-click='blackbox.mute()') Mute
        %button.button(ng-click='blackbox.unmute()') Unmute 
    
    .talk-tabs-box.row
      .small-12
        %dl.tabs.talk-tabs(data-tab="true")
          %dd.text-center
            %a(href="#talk-tab-description")
              Description
          %dd.text-center
            %a(href="#talk-tab-discussion")
              Discussion
          %dd.active.text-center
            %a(href="#talk-tab-participants")
              Participants

  .talk-tabs-content-block
    .row
      .tabs-content.small-12       
        #talk-tab-description.content
          %p
            Dapibus Purus
        #talk-tab-discussion.content
          %p
            Dapibus Purus              
        #talk-tab-participants.content.active
          .participant.avatar(ng-repeat="participant in session.participants()")
            {{participant}}
            %span(ng-click="session.promote(participant.name)")
              %p.avatar-name.text-center
                {{ participant.name }}
              %img.avatar-img(ng-src="{{participant.image}}")
  
.chat

.log

.scripts
  %script(src='/assets/livepage.js')
  = render 'config'
        

%p#notice= notice

.draft
  = image_tag @talk.image.thumb('400x200#').url if @talk.image_stored?
  %h2 This is the common part.
  %p= @talk.user.name  
  %p= @talk.title
  %p= @talk.teaser

.draft
  %h2 This will be the new talk page (prelive).
  %p
    = l(@talk.starts_at, format: :designed)
    â€”
    = distance_of_time_in_words(@talk.starts_at, @talk.ends_at)
    (#{@talk.duration} minutes)
  %p
    starts in
    = distance_of_time_in_words_to_now(@talk.starts_at)
    (#{@talk.starts_in} seconds)

.draft
  %h2 This will be the new talk page (live).

  %p
    ends in
    = distance_of_time_in_words_to_now(@talk.ends_at)
    (#{@talk.ends_in} seconds)
  %p= link_to t('.edit'), [:edit, @venue, @talk]
  %p= link_to t('.delete'), [@venue, @talk], method: :delete, data: { confirm: t('.confirm_delete', default: 'Are you sure?' ) }
  %p TODO progressbar
  %p TODO host and quests

